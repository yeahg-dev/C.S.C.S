# Chapter 6️⃣ Process Synchronization
자료 출처 :  http://www.kocw.net/home/search/kemView.do?kemId=1046323

## 0. 데이터 접근 패턴
동일한 데이터를 여러개의 주체가 접근해서 사용하려고 할 때, 누가 먼저 접근햇느냐에 따라 예상치 못한 결과를 초래할 수 있음
<img width="638" alt="스크린샷 2022-04-25 오후 8 39 54" src="https://user-images.githubusercontent.com/81469717/165095278-3e5179c6-8aee-4542-bf76-a357febb7efc.png">
- 멀티 프로세서의 경우 발생 가능
- 공유메모리를 사용하는 경으 발생 가능
- 커널 내부 데이터를 접근하는 루틴들 간에 발생 가능★ 여러 프로세서가 동일 시스템 콜을 할 수 있기 때문

## 1. OS에서 race condition이 발생하는 경우

### 1️⃣ 커널 모드에서 인터럽트가 들어올 때
✅ 해결: 데이터에 대한 사용이 끝날 때까지, 인터러트 처리를 금지함   

### 2️⃣  여러 사용자 프로그램이 동일 시스템 콜을 할 때
사용자 프로그램A의 코드가 실행중 시스템 콜을 해서 커널 코드를 실행하다가 CPU할당 시간이 만료되어 다른 프로그램B이 실행. B도 시스템 콜을 해서 동일 데이터에 접근하게 되는 경우

✅ 해결: 어떤 프로그램이 커널모드에 있을 경우엔, 커널모드가 완료될 때 컨텍스트 스위칭을 실행

### 3️⃣ multi processor
여러개의 CPU가 동일한 데이터에 접근하는 경우

✅ 해결1 : 락을 걸어서 하나의 CPU만 커널에 들어갈 수 있도록
- 비효율적

✅ 해결2 : 커널 내부에 있는 공유 데이테어 접근할 때마다 그 데이터에 대한 락을 거는 방법

## 🚨 Process Synchronization 문제
- 공유 데이터의 동시 접근은 데이터의 불일치 문제를 발생시킬 수 있다.
- 일관성 유지를 위해서는 협력 프로세스간의 실행 순서를 정해주는 매커니즘이 필요하다.

< 해결방법 >
1. 레이스 컨디션을 막기 위해서는 concurrent process는 동기화 되어야한다.
2. critical section에는 하나의 프로세스만 들어갈 수 있도록 제한을 걸어야한다.
- Critical section : 공유데이터에 접근하는 코드
